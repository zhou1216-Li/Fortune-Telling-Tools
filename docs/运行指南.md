# 命理预测工具 - 运行指南

## 🚀 快速开始

### 1. 安装依赖

**Windows 用户：**
```bash
# 方法一：使用安装脚本（推荐）
scripts\install.bat

# 方法二：手动安装
pip install -r requirements.txt
```

**Linux/Mac 用户：**
```bash
# 方法一：使用安装脚本（推荐）
chmod +x scripts/install.sh
./scripts/install.sh

# 方法二：手动安装
pip3 install -r requirements.txt
```

### 2. 运行应用

**Windows 用户：**
```bash
# 方法一：使用启动脚本（推荐）
scripts\start.bat

# 方法二：使用增强脚本（包含依赖与数据库检查）
scripts\启动应用.bat

# 方法三：直接运行
python run.py
```

**Linux/Mac 用户：**
```bash
# 方法一：使用启动脚本（推荐）
chmod +x scripts/start.sh
./scripts/start.sh

# 方法二：使用增强脚本（包含依赖与数据库检查）
chmod +x scripts/启动应用.sh
./scripts/启动应用.sh

# 方法三：直接运行
python3 run.py
```

### 3. 访问应用

打开浏览器访问：**http://localhost:5000**

## 📋 功能测试

### 测试模块导入
```bash
python scripts\smoke_test.py
```

### 测试完整功能
```bash
python test_modules.py
```

## 🎯 功能使用

### 1. 分析预测
1. 访问主页
2. 输入姓名、生日、MBTI类型
3. 可选：输入出生时辰、居住方位、房屋朝向
4. 可选：启用八字分析和塔罗牌占卜
5. 点击"开始全面分析"
6. 查看分析结果

### 2. 匹配度分析
1. 点击"匹配度分析"标签
2. 输入两个人的信息
3. 点击"开始匹配度分析"
4. 查看匹配度分析结果和图表

### 3. 历史记录
1. 点击"历史记录"标签
2. 查看所有历史分析记录
3. 点击记录查看详细信息

### 4. 心理聊天
1. 点击"心理聊天"标签
2. 输入消息与AI助手聊天
3. 点击"清空聊天"清空聊天记录

## 🔧 故障排除

### 问题1：模块导入失败
**错误信息**：`ModuleNotFoundError: No module named 'xxx'`
**解决方案**：
```bash
pip install -r requirements.txt
```

### 问题2：端口被占用
**错误信息**：`Address already in use`
**解决方案**：
- 修改 `run.py` 中的端口号
- 或使用环境变量：`set PORT=5001`（Windows）

### 问题3：数据库错误
**错误信息**：`Database error`
**解决方案**：
- 检查 `data/` 目录是否存在
- 删除 `data/fortune_telling.db` 重新创建

### 问题4：图表不显示
**错误信息**：图表区域空白
**解决方案**：
- 检查网络连接（图表使用CDN）
- 检查浏览器控制台错误
- 确认plotly已安装：`pip install plotly`

### 问题5：页面样式混乱
**解决方案**：
- 清除浏览器缓存
- 检查CSS文件路径
- 检查模板文件是否正确

## 📊 功能清单

### ✅ 已实现功能
- [x] 用户信息输入
- [x] 星座分析
- [x] MBTI性格分析
- [x] 运势预测
- [x] 历史记录保存
- [x] 用户反馈机制
- [x] 心理聊天助手
- [x] 匹配度分析
- [x] 可视化图表
- [x] 心理健康分析
- [x] 多命理学分析（八字、塔罗牌）
- [x] 个性化推荐
- [x] 行动计划
- [x] 风水分析

### ⏳ 待实现功能
- [ ] 每日/每周运势推送（需要邮件/短信服务）
- [ ] 社交分享功能（需要社交平台SDK）
- [ ] 多语言支持（需要翻译文件）

## 📝 注意事项

1. **八字分析**：使用简化算法，实际八字计算更复杂
2. **塔罗牌占卜**：结果基于随机抽取，仅供参考
3. **匹配度分析**：基于通用规则，实际关系需考虑多种因素
4. **心理健康分析**：基于MBTI类型特征，如有严重心理问题，建议寻求专业帮助
5. **AI聊天**：使用免费API，回复质量可能有限

## 🎉 功能亮点

1. **全栈Python**：前后端都使用Python开发
2. **纯后端渲染**：使用Jinja2模板引擎，无需前端JavaScript
3. **可视化图表**：使用Plotly生成交互式图表
4. **多命理学支持**：支持星座、MBTI、八字、塔罗牌等多种分析
5. **个性化推荐**：基于运势预测生成个性化推荐
6. **行动计划**：基于运势预测生成具体行动计划
7. **匹配度分析**：分析两个人之间的匹配度
8. **心理健康分析**：基于MBTI类型的心理健康分析

## 📞 技术支持

如有问题，请检查：
1. Python版本是否兼容（需要3.8+）
2. 依赖是否完整安装
3. 数据库文件是否可写
4. 端口是否被占用
5. 浏览器控制台是否有错误

## 🎯 下一步

1. 测试所有功能
2. 检查数据库是否正确保存数据
3. 测试图表是否正常显示
4. 测试所有页面是否正常访问
5. 检查响应式布局是否正常

## 📚 相关文档

- `README.md` - 项目说明
- `docs/功能说明.md` - 功能详细说明
- `docs/检查清单.md` - 功能检查清单
- `docs/运行指南.md` - 本文件

