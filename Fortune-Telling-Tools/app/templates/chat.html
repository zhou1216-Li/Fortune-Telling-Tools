{% extends "index.html" %}

{% block content %}
<!-- å¿ƒç†èŠå¤©æ ‡ç­¾é¡µ -->
<div class="tab-content active">
        <div class="card">
            <h2>ğŸ’¬ å¿ƒç†èŠå¤©åŠ©æ‰‹</h2>
            <p class="subtitle">åœ¨è¿™é‡Œåˆ†äº«ä½ çš„æ„Ÿå—ï¼Œæˆ‘ä¼šè®¤çœŸå€¾å¬</p>
            
            {% if error %}
            <div class="error-message">{{ error }}</div>
            {% endif %}
            
            <div class="chat-container">
            <div class="chat-messages">
                {% if messages %}
                    {% for msg in messages %}
                    <div class="message {{ msg.sender }}">
                        <div>{{ msg.content|replace('\n', '<br>')|safe }}</div>
                        <div class="message-time">[{{ msg.time }}]</div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="message assistant">
                        <div>ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„å¿ƒç†èŠå¤©åŠ©æ‰‹ã€‚æœ‰ä»€ä¹ˆæƒ³èŠçš„å—ï¼Ÿæˆ‘ä¼šè®¤çœŸå€¾å¬çš„ã€‚</div>
                        <div class="message-time">[ç³»ç»Ÿ]</div>
                    </div>
                {% endif %}
            </div>
            
            <form method="POST" action="{{ url_for('main.chat') }}" class="chat-input-group">
                <input type="text" name="message" placeholder="è¾“å…¥æ¶ˆæ¯..." required autofocus>
                <button type="submit" class="btn-primary">å‘é€</button>
            </form>
            <div style="margin-top: 10px;">
                <a href="{{ url_for('main.clear_chat') }}" class="btn-secondary" style="display: inline-block;">æ¸…ç©ºèŠå¤©</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

